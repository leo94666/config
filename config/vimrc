""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"                                                                "
"                                                                "
"             ____         __     ___                            "
"            |  _ \ _ __ __\ \   / (_)_ __ ___                   "
"            | |_) | '__/ _ \ \ / /| | '_ ` _ \                  "
"            |  __/| | | (_) \ V / | | | | | | |                 "
"            |_|   |_|  \___/ \_/  |_|_| |_| |_|                 "
"                                                                "
"                                                                "
"                               Email: liyang.ok@outlook.com     "
"                                                                "
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"ReadMe{{{                                                             "
"  å®‰è£…æ’ä»¶æ–¹æ³•(æœ¬æ–¹æ¡ˆé‡‡ç”¨Vundleç®¡ç†æ’ä»¶):                       "
"                                                                "
"     bundleåˆ†ä¸ºä¸‰ç±»ï¼Œæ¯”è¾ƒå¸¸ç”¨å°±æ˜¯ç¬¬äºŒç§ï¼š
"
"       1.åœ¨Github vim-scripts ç”¨æˆ·ä¸‹çš„repos,åªéœ€è¦å†™å‡ºreposåç§°
"       2.åœ¨Githubå…¶ä»–ç”¨æˆ·ä¸‹çš„repos, éœ€è¦å†™å‡ºâ€ç”¨æˆ·å/reposåâ€
"       3.ä¸åœ¨Githubä¸Šçš„æ’ä»¶ï¼Œéœ€è¦å†™å‡ºgitå…¨è·¯å¾„
"
"  å°†å®‰è£…çš„æ’ä»¶åœ¨~/.vimrcé…ç½®ï¼Œä½†æ˜¯æˆ‘æ˜¯å°†æ’ä»¶é…ç½®ä¿¡æ¯æ”¾åœ¨
"  ~/.vimrc.bundlesï¼Œæ‰€ä»¥ä½ ä¼šåœ¨æˆ‘çš„ï½ï¼.vimrc.bundlesé‡Œçœ‹
"  åˆ°æˆ‘è£…çš„æ’ä»¶ã€‚
"
"  æ’ä»¶çš„ä¸‹è½½å®‰è£…ï¼š
"
"       1. ç»ˆç«¯è¾“å…¥vimï¼Œæ‰“å¼€vimï¼Œæ­£å¸¸æ¨¡å¼ä¸‹è¾“å…¥
"               :BundleInstall  å›è½¦
"       2.  åœ¨ç»ˆç«¯ä¸­ç›´æ¥è¿è¡Œ  vim +BundleInstall +qall
"
"  æ’ä»¶æ›´æ–°ï¼š
"               :PluginUpdate
"  æ˜¾ç¤ºå·²å®‰è£…çš„æ’ä»¶åˆ—è¡¨ï¼š
"               :PluginList
"  æ¸…ç†æœªä½¿ç”¨çš„æ’ä»¶ï¼š
"               :PluginClean
"
"
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Vimå¿«æ·é”®è®°å½•
"
"   æŠ˜å ä»£ç (Normal)ï¼š
"       æŠ˜å {}å†…: zf%
"       æŠ˜å åˆ°86è¡Œï¼šzf86G
"       ç©ºæ ¼é”®
"
"
"   å¤šè¡Œé”è¿›(Visul)ï¼š
"       é€‰æ‹©å¤šè¡Œï¼ŒæŒ‰ctrl+vè¿›å…¥visulæ¨¡å¼ï¼Œç”¨>æˆ–<ç¼©è¿›æˆ–ç¼©å‡ºï¼ˆshift+,)
"
"   æ˜¾ç¤ºéšè—å†å²è®°å½•undoï¼šF2
"   æ˜¾ç¤ºéšè—å·¦ä¾§nerdtreeç›®å½•ï¼šF3
"   æ˜¾ç¤ºéšè—å³ä¾§tagbarç›®å½•ï¼šF4
"   ç¼–è¯‘ï¼šF5
"   æ˜¾ç¤ºéšè—å†…ç½®ç»ˆç«¯ï¼šF6
"   è°ƒè¯•ï¼šF8
"
"   é€‰ä¸­è‡ªåŠ¨è¡¥å…¨ï¼š\<tab>
"   å¤åˆ¶ï¼šyæ˜¯å¤åˆ¶2è¡Œ
"         nyæ˜¯å¤åˆ¶n+1è¡Œ
"         yyï¼šå¤åˆ¶å½“å‰è¡Œ
"         nyyï¼šnè¡¨ç¤ºå¤§äº1çš„æ•°å­—ï¼Œå¤åˆ¶nè¡Œ
"         ywï¼šä»å…‰æ ‡å¤„å¤åˆ¶è‡³ä¸€ä¸ªå•å­/å•è¯çš„æœ«å°¾ï¼ŒåŒ…æ‹¬ç©ºæ ¼
"         yeï¼šä»å…‰æ ‡å¤„å¤åˆ¶è‡³ä¸€ä¸ªå•å­/å•è¯çš„æœ«å°¾ï¼Œä¸åŒ…æ‹¬ç©ºæ ¼
"         y$ï¼šä»å½“å‰å…‰æ ‡å¤åˆ¶åˆ°è¡Œæœ«
"         y0ï¼šä»å½“å‰å…‰æ ‡ä½ç½®ï¼ˆä¸åŒ…æ‹¬å…‰æ ‡ä½ç½®ï¼‰å¤åˆ¶ä¹‹è¡Œé¦–
"         y3lï¼šä»å…‰æ ‡ä½ç½®ï¼ˆåŒ…æ‹¬å…‰æ ‡ä½ç½®ï¼‰å‘å³å¤åˆ¶3ä¸ªå­—ç¬¦
"         y5Gï¼šå°†å½“å‰è¡Œï¼ˆåŒ…æ‹¬å½“å‰è¡Œï¼‰è‡³ç¬¬5è¡Œï¼ˆä¸åŒ…æ‹¬å®ƒï¼‰å¤åˆ¶
"         y3Bï¼šä»å½“å‰å…‰æ ‡ä½ç½®ï¼ˆä¸åŒ…æ‹¬å…‰æ ‡ä½ç½®ï¼‰åå‘å¤åˆ¶3ä¸ªå•è¯
"   ç²˜è´´ï¼šp
"
"   é€‰æ‹©ï¼šv+h/j/k/l---d:å‰ªåˆ‡ y:å¤åˆ¶ p:ç²˜è´´ ^  --------é€‰ä¸­å½“å‰è¡Œï¼Œå…‰æ ‡ä½ç½®åˆ°è¡Œé¦–ï¼ˆæˆ–è€…ä½¿ç”¨é”®ç›˜çš„HOMEé”®ï¼‰$  --------é€‰ä¸­å½“å‰è¡Œï¼Œå…‰æ ‡ä½ç½®åˆ°è¡Œå°¾ï¼ˆæˆ–è€…ä½¿ç”¨é”®ç›˜çš„ENDé”®ï¼‰
"
"   å‰ªåˆ‡ï¼šddï¼šå‰ªåˆ‡å½“å‰è¡Œ
"         nddï¼šnè¡¨ç¤ºå¤§äº1çš„æ•°å­—ï¼Œå‰ªåˆ‡nè¡Œ
"         dwï¼šä»å…‰æ ‡å¤„å‰ªåˆ‡è‡³ä¸€ä¸ªå•å­/å•è¯çš„æœ«å°¾ï¼ŒåŒ…æ‹¬ç©ºæ ¼
"         deï¼šä»å…‰æ ‡å¤„å‰ªåˆ‡è‡³ä¸€ä¸ªå•å­/å•è¯çš„æœ«å°¾ï¼Œä¸åŒ…æ‹¬ç©ºæ ¼
"         d$ï¼šä»å½“å‰å…‰æ ‡å‰ªåˆ‡åˆ°è¡Œæœ«
"         d0ï¼šä»å½“å‰å…‰æ ‡ä½ç½®ï¼ˆä¸åŒ…æ‹¬å…‰æ ‡ä½ç½®ï¼‰å‰ªåˆ‡ä¹‹è¡Œé¦–
"         d3lï¼šä»å…‰æ ‡ä½ç½®ï¼ˆåŒ…æ‹¬å…‰æ ‡ä½ç½®ï¼‰å‘å³å‰ªåˆ‡3ä¸ªå­—ç¬¦
"         d5Gï¼šå°†å½“å‰è¡Œï¼ˆåŒ…æ‹¬å½“å‰è¡Œï¼‰è‡³ç¬¬5è¡Œï¼ˆä¸åŒ…æ‹¬å®ƒï¼‰å‰ªåˆ‡
"         d3Bï¼šä»å½“å‰å…‰æ ‡ä½ç½®ï¼ˆä¸åŒ…æ‹¬å…‰æ ‡ä½ç½®ï¼‰åå‘å‰ªåˆ‡3ä¸ªå•è¯
"         dHï¼šå‰ªåˆ‡ä»å½“å‰è¡Œè‡³æ‰€æ˜¾ç¤ºå±å¹•é¡¶è¡Œçš„å…¨éƒ¨è¡Œ
"         dMï¼šå‰ªåˆ‡ä»å½“å‰è¡Œè‡³å‘½ä»¤Mæ‰€æŒ‡å®šè¡Œçš„å…¨éƒ¨è¡Œ
"         dLï¼šå‰ªåˆ‡ä»å½“å‰è¡Œè‡³æ‰€æ˜¾ç¤ºå±å¹•åº•çš„å…¨éƒ¨è¡Œ
"
"
"
"
"
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""}}}



"Plugin Config{{{{

    set nocompatible              " be iMproved, required
    filetype off                  " required

    set rtp+=~/.vim/bundle/Vundle.vim
    call vundle#begin()

    Plugin 'VundleVim/Vundle.vim'
    Plugin 'scrooloose/nerdtree'
    Plugin 'Valloric/YouCompleteMe'
    Plugin 'vim-airline/vim-airline'
    Plugin 'majutsushi/tagbar'
    Plugin 'luochen1990/rainbow' "å½©è™¹æ‹¬å·
    Plugin 'jiangmiao/auto-pairs'
    Plugin 'Yggdroot/indentLine'
    "ä»£ç ç‰‡æ®µè¡¥å…¨
    Plugin 'SirVer/ultisnips'
    Plugin 'honza/vim-snippets'

    Plugin 'mbbill/undotree'
    Plugin 'kien/ctrlp.vim'
    Plugin 'tacahiroy/ctrlp-funky'
    Plugin 'tpope/vim-fugitive'
    Plugin 'scrooloose/nerdcommenter'

    Plugin 'DoxygenToolkit.vim'
    Plugin 'tenfyzhong/CompleteParameter.vim'

    Plugin 'davidhalter/jedi-vim'

    Plugin 'mattn/emmet-vim'
    Plugin 'pangloss/vim-javascript'



call vundle#end()            " required
filetype plugin indent on    " required
" To ignore plugin indent changes, instead use:
"filetype plugin on
set noshowmode      " necessary for plugin echodoc.vim


"nerdtree{{{
    autocmd vimenter * NERDTree  
    autocmd StdinReadPre * let s:std_in=1
    autocmd VimEnter * if argc() == 1 && isdirectory(argv()[0]) && !exists("s:std_in") | exe 'NERDTree' argv()[0] | wincmd p | ene | endif
    autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTree") && b:NERDTree.isTabTree()) | q | endif
    let g:NERDTreeDirArrowExpandable = 'â–¸'
    let g:NERDTreeDirArrowCollapsible = 'â–¾'
    let NERDTreeShowBookmarks=1
    let NERDTreeIgnore=['\.py[cd]$', '\~$', '\.swo$', '\.swp$', '^\.git$', '^\.hg$', '^\.svn$', '\.bzr$']
    let NERDTreeChDirMode=0
    let NERDTreeQuitOnOpen=0
    let NERDTreeMouseMode=2
    let NERDTreeShowHidden=1
    let NERDTreeKeepTreeInNewTab=1
    let g:nerdtree_tabs_open_on_gui_startup=0
    map <F3> :NERDTreeToggle<CR>
    autocmd VimEnter * NERDTree
    wincmd w
    autocmd VimEnter * wincmd w
"}}}

"nerdcommenter{{{
    " æ³¨é‡Šçš„æ—¶å€™è‡ªåŠ¨åŠ ä¸ªç©ºæ ¼, å¼ºè¿«ç—‡å¿…é…
    let g:NERDSpaceDelims=1
"}}}

"tagbar{{{
    nmap <F4> :TagbarToggle<CR>
    let g:tagbar_ctags_bin='/usr/local/bin/ctags' "è®¾ç½®tagbarä½¿ç”¨çš„ctagsçš„æ’ä»¶,å¿…é¡»è¦è®¾ç½®å¯¹
    let g:tagbar_width=24  "è®¾ç½®tagbarçš„çª—å£å®½åº¦
    let g:tagbar_left=0  "è®¾ç½®tagbarçš„çª—å£æ˜¾ç¤ºçš„ä½ç½®
"}}}


"doxygen{{{

    let g:DoxygenToolkit_briefTag_pre=" @brief  "
    let g:DoxygenToolkit_paramTag_pre=" @Param "
    let g:DoxygenToolkit_returnTag=" @Returns   "
    let g:DoxygenToolkit_blockHeader=""
    let g:DoxygenToolkit_blockFooter=""
    let g:DoxygenToolkit_authorName=" ly"
    let g:DoxygenToolkit_licenseTag=" ly license"
"}}}

"airline{{{
    " å…³é—­ç©ºç™½ç¬¦æ£€æµ‹
    let g:airline#extensions#whitespace#enabled=0
    let g:airline#extensions#tabline#enabled = 1
    let g:airline#extensions#tabline#buffer_nr_show = 0
    let g:airline#extensions#whitespace#symbol = '!'

    let g:airline_left_sep = '|'
    let g:airline_left_alt_sep = '|'
    let g:airline_right_sep = ''
    let g:airline_right_alt_sep = '|'
"}}}


"rainbow{{{
    let g:rainbow_active = 1 "0 if you want to enable it later via :RainbowToggle
"}}}



"CompleteParameter{{{
    inoremap <silent><expr> ( complete_parameter#pre_complete("(")
    smap <c-j> <Plug>(complete_parameter#goto_next_parameter)
    imap <c-j> <Plug>(complete_parameter#goto_next_parameter)
    smap <c-k> <Plug>(complete_parameter#goto_previous_parameter)
    imap <c-k> <Plug>(complete_parameter#goto_previous_parameter)
    "æ—¥å¿—
    let g:complete_parameter_log_level = 5
    let g:complete_parameter_use_ultisnips_mapping = 0
    let g:complete_parameter_echo_signature = 1
    let g:complete_parameter_py_remove_default = 1

    let g:AutoPairs = {'[':']', '{':'}',"'":"'",'"':'"', '`':'`'}
    inoremap <buffer><silent> ) <C-R>=AutoPairsInsert(')')<CR>


"}}}

" UltiSnips {{{
    let g:UltiSnipsExpandTrigger="<leader><tab>"
    let g:UltiSnipsJumpForwardTrigger="<tab>"
    let g:UltiSnipsJumpBackwardTrigger="<s-tab>"
    let g:UltiSnipsEditSplit="vertical"
    let g:UltiSnipsSnippetDirectories=[$HOME.'/.vim/UltiSnips']

"}}}

"youcompleteme{{{
    let g:ycm_autoclose_preview_window_after_completion=1
    map <leader>g  :YcmCompleter GoToDefinitionElseDeclaration<CR>

    let g:ycm_global_ycm_extra_conf='~/.vim/.ycm_extra_conf.py'
    let g:ycm_add_preview_to_completeopt = 0
    let g:ycm_show_diagnostics_ui = 0
    let g:ycm_server_log_level = 'info'
    let g:ycm_min_num_identifier_candidate_chars = 2
    let g:ycm_collect_identifiers_from_comments_and_strings = 1
    let g:ycm_complete_in_strings=1
    let g:ycm_max_num_candidates=30
    let g:ycm_max_num_identifier_candidates=30
    let g:ycm_max_diagnostics_to_display=30

    " YCM è¡¥å…¨èœå•é…è‰²
    " èœå•
    "highlight Pmenu ctermfg=2 ctermbg=3 guifg=#005f87 guibg=#EEE8D5
    "é€‰ä¸­é¡¹
    "highlight PmenuSel ctermfg=2 ctermbg=3 guifg=#AFD700 guibg=#106900
    let g:ycm_complete_in_comments=1      " è¡¥å…¨åŠŸèƒ½åœ¨æ³¨é‡Šä¸­åŒæ ·æœ‰æ•ˆ

    let g:ycm_confirm_extra_conf=0        " å…è®¸ vim åŠ è½½ .ycm_extra_conf.py æ–‡ä»¶ï¼Œä¸å†æç¤º

    let g:ycm_collect_identifiers_from_tags_files=1        " å¼€å¯ YCM æ ‡ç­¾è¡¥å…¨å¼•æ“

    "inoremap <leader><tab> <C-x><C-o>           " YCM é›†æˆ OmniCppComplete è¡¥å…¨å¼•æ“ï¼Œè®¾ç½®å…¶å¿«æ·é”®

    set completeopt-=menu,menuone                  " è¡¥å…¨å†…å®¹ä¸ä»¥åˆ†å‰²å­çª—å£å½¢å¼å‡ºç°ï¼Œåªæ˜¾ç¤ºè¡¥å…¨åˆ—è¡¨

    let g:ycm_min_num_of_chars_for_completion=2     " ä»ç¬¬ä¸€ä¸ªé”®å…¥å­—ç¬¦å°±å¼€å§‹ç½—åˆ—åŒ¹é…é¡¹

    let g:ycm_cache_omnifunc=0        " ç¦æ­¢ç¼“å­˜åŒ¹é…é¡¹ï¼Œæ¯æ¬¡éƒ½é‡æ–°ç”ŸæˆåŒ¹é…é¡¹

    let g:ycm_seed_identifiers_with_syntax=1       " è¯­æ³•å…³é”®å­—è¡¥å…¨

    let g:ycm_collect_identifiers_from_tags_files=1      " å¼€å¯ YCM æ ‡ç­¾å¼•æ“

    set tags+=/data/misc/software/misc./vim/stdcpp.tags       " å¼•å…¥ C++ æ ‡å‡†åº“tags

    "
    "inoremap <leader>; <C-x><C-o>

    let g:ycm_semantic_triggers =  {
        \   'c' : ['->','.','re![_a-zA-z0-9]'],
        \   'cpp,objcpp' : ['->', '.', '::'],
        \   'objc' : ['->', '.', 're!\[[_a-zA-Z]+\w*\s', 're!^\s*[^\W\d]\w*\s', 're!\[.*\]\s'],
        \   'ocaml' : ['.', '#'],
        \   'perl' : ['->'],
        \   'php' : ['->', '::'],
        \   'cs,java,javascript,typescript,d,python,perl6,scala,vb,elixir,go' : ['.'],
        \   'ruby' : ['.', '::'],
        \   'lua' : ['.', ':'],
        \   'erlang' : [':'],
        \ }

"}}}


"IndentLine{{{
    let g:indentLine_char = 'â”†'
"}}}


"Undo{{{
    nnoremap <F2> :UndotreeToggle<cr>
"}}}


"ctrlp{{{
    "<Leader>pæœç´¢å½“å‰ç›®å½•ä¸‹æ–‡ä»¶
    let g:ctrlp_map = '<Leader>p'
    let g:ctrlp_cmd = 'CtrlP'
    "<Leader>fæœç´¢MRUæ–‡ä»¶
    nmap <Leader>f :CtrlPMRUFiles<CR>
    "<Leader>bæ˜¾ç¤ºç¼“å†²åŒºæ–‡ä»¶ï¼Œå¹¶å¯é€šè¿‡åºå·è¿›è¡Œè·³è½¬
    nmap <Leader>b :CtrlPBuffer<CR>
    "è®¾ç½®æœç´¢æ—¶å¿½ç•¥çš„æ–‡ä»¶
    let g:ctrlp_custom_ignore = {
        \ 'dir':  '\v[\/]\.(git|hg|svn|rvm)$',
        \ 'file': '\v\.(exe|so|dll|zip|tar|tar.gz|pyc)$',
        \ }
    let g:ctrlp_working_path_mode = 0
    let g:ctrlp_match_window_bottom = 1
    "ä¿®æ”¹QuickFixçª—å£æ˜¾ç¤ºçš„æœ€å¤§æ¡ç›®æ•°
    let g:ctrlp_max_height = 15
    let g:ctrlp_match_window_reversed = 0
    "è®¾ç½®MRUæœ€å¤§æ¡ç›®æ•°ä¸º500
    let g:ctrlp_mruf_max = 500
    let g:ctrlp_follow_symlinks = 1
    "é»˜è®¤ä½¿ç”¨å…¨è·¯å¾„æœç´¢ï¼Œç½®1åæŒ‰æ–‡ä»¶åæœç´¢ï¼Œå‡†ç¡®ç‡ä¼šæœ‰æ‰€æé«˜ï¼Œå¯ä»¥ç”¨<C-d>è¿›è¡Œåˆ‡æ¢
    let g:ctrlp_by_filename = 1
    "é»˜è®¤ä¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œç½®1æ”¹ä¸ºé»˜è®¤ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨<C-r>è¿›è¡Œåˆ‡æ¢
    let g:ctrlp_regexp = 0
    "è‡ªå®šä¹‰æœç´¢åˆ—è¡¨çš„æç¤ºç¬¦
    let g:ctrlp_line_prefix = 'â™ª '
"}}}
"{{{
autocmd QuickFixCmdPost *grep* cwindow
"}}}

"emmet{{{
    "let g:user_emmet_leader_key='<ctrl->'  "åˆ‡æ¢<ctrl-y>,
    "let g:user_emmet_settings = webapi#json#decode(join(readfile(expand('~/.snippets_custom.json')), "\n"))
"}}}


"web{{{

   " let g:javascript_plugin_jsdoc = 1
   " let g:javascript_plugin_ngdoc = 1
   " let g:javascript_plugin_flow = 1

    "let g:javascript_conceal_function             = "Æ’"
    "let g:javascript_conceal_null                 = "Ã¸"
    "let g:javascript_conceal_this                 = "@"
    "let g:javascript_conceal_return               = "â‡š"
    "let g:javascript_conceal_undefined            = "Â¿"
    "let g:javascript_conceal_NaN                  = "â„•"
    "let g:javascript_conceal_prototype            = "Â¶"
    "let g:javascript_conceal_static               = "â€¢"
    "let g:javascript_conceal_super                = "Î©"
    "let g:javascript_conceal_arrow_function       = "â‡’"
    "let g:javascript_conceal_noarg_arrow_function = "ğŸ…"
    "let g:javascript_conceal_underscore_arrow_function = "ğŸ…"


"}}}



""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""}}}}



"general{{{{  

    "set dictionary-=~/.vim/dict.txt dictionary+=~/.vim/dict.txt
    "set complete-=k complete+=k

    "Enable omni completion.
    "autocmd FileType css setlocal omnifunc=csscomplete#CompleteCSS
    "autocmd FileType html,markdown setlocal omnifunc=htmlcomplete#CompleteTags
    "autocmd FileType javascript setlocal omnifunc=javascriptcomplete#CompleteJS
    "autocmd FileType python setlocal omnifunc=pythoncomplete#Complete
    "autocmd FileType xml setlocal omnifunc=xmlcomplete#CompleteTags
    "autocmd FileType ruby setlocal omnifunc=rubycomplete#Complete
    "autocmd FileType haskell setlocal omnifunc=necoghc#omnifunc
    "set completeopt-=preview
set cmdheight=2
    syntax on "é«˜äº®ä»£ç 
    set mouse=a "è®¾ç½®å…‰æ ‡éšé¼ æ ‡ç§»åŠ¨
    "set modifiable    "
    set autowrite                       " Automatically write a file when leaving a modified buffer
    set autoread
    set shortmess+=filmnrxoOtT          " Abbrev. of messages (avoids 'hit enter')
    set viewoptions=folds,options,cursor,unix,slash " Better Unix / Windows compatibility
    set virtualedit=onemore             " Allow for cursor beyond last character
    set history=1000                    " Store a ton of history (default is 20)
    set hidden                          " Allow buffer switching without saving
    set iskeyword-=.                    " '.' is an end of word designator è®©'.' ä½œä¸ºå•è¯åˆ†å‰²ç¬¦
    set iskeyword-=#                    " '#' is an end of word designator
    set iskeyword-=-                    " '-' is an end of word designator
    set iskeyword+=.,_,$,@,%,#,-        "" å¸¦æœ‰å¦‚ä¸‹ç¬¦å·çš„å•è¯ä¸è¦è¢«æ¢è¡Œåˆ†å‰²
    set backspace=indent,eol,start  " Backspace for dummies

    highlight clear SignColumn      " SignColumn should match background
    highlight clear LineNr          " Current line number row will have same background color in relative mode
    "highlight clear CursorLineNr    " Remove highlight color from current line number
    set cursorline                  " é«˜äº®å½“å‰è¡Œ


    if has('clipboard')
        if has('unnamedplus')  " When possible use + register for copy-paste
            set clipboard=unnamed,unnamedplus
        else         " On mac and Windows, use * register for copy-paste
            set clipboard=unnamed
        endif
    endif

    set showcmd "å³ä¸‹è§’å‘½ä»¤å›æ˜¾

    set backspace=indent,eol,start  " Backspace for dummies
    set linespace=0                 " No extra spaces between rows
    set showmatch                   " Show matching brackets/parenthesis
    set incsearch                   " Find as you type search
    set hlsearch                    " Highlight search terms
    set winminheight=0              " Windows can be 0 line high
    set ignorecase                  " Case insensitive search
    set smartcase                   " Case sensitive when uc present
    set wildmenu                    " Show list instead of just completing
    set wildmode=list:longest,full  " Command <Tab> completion, list matches, then longest common part, then all.
    set whichwrap=b,s,h,l,<,>,[,]   " Backspace and cursor keys wrap too
    set scrolljump=5                " Lines to scroll when cursor leaves screen
    set scrolloff=3                 " Minimum lines to keep above and below cursor
    set list                       "show tab
    set listchars=tab:>\ ,trail:â—,extends:#,nbsp:. " Highlight problematic whitespace
    set nowrap                      " Do not wrap long lines
    set autoindent                  " Indent at the same level of the previous line
    set shiftwidth=4                " Use indents of 4 spaces
    set expandtab                   " Tabs are spaces, not tabs
    set tabstop=4                   " An indentation every four columns
    set softtabstop=4               " Let backspace delete indent
    set nojoinspaces                " Prevents inserting two spaces after punctuation on a join (J)
    set splitright                  " Puts new vsplit windows to the right of the current
    set splitbelow                  " Puts new split windows to the bottom of the current
    "set matchpairs+=<:>             " Match, to be used with %
    set pastetoggle=<F12>           " pastetoggle (sane indentation on pastes)
    set rnu                         "ç›¸å¯¹è¡Œå·
    set number                      " Line numbers on
    augroup relative_numbser        "normalæ¨¡å¼æ—¶ä½¿ç”¨ç›¸å¯¹è¡Œå·,insertæ¨¡å¼ç»å¯¹è¡Œå·
        autocmd!
        autocmd InsertEnter * :set norelativenumber
        autocmd InsertLeave * :set relativenumber
    augroup END
    "è‡ªåŠ¨ä¿å­˜æŠ˜å ç 
    set foldmethod=marker
    au FileType c set foldmethod=syntax
    au FileType cpp set foldmethod=syntax
    au FileType java set foldmethod=syntax
    au FileType python set foldmethod=indent
    au FileType css set foldmethod=syntax
    au FileType html set foldmethod=indent
    au FileType javascript set foldmethod=indent

    set foldenable " å¼€å§‹æŠ˜å 
    set foldcolumn=4 " è®¾ç½®æŠ˜å åŒºåŸŸçš„å®½åº¦
    setlocal foldlevel=20 " è®¾ç½®æŠ˜å å±‚æ•°ä¸º
    nnoremap <space> @=((foldclosed(line('.')) < 0) ? 'zc' : 'zo')<CR>   " ç”¨ç©ºæ ¼é”®æ¥å¼€å…³æŠ˜å 
    au BufWinLeave *.* silent mkview  "records settings
    au BufWinEnter *.* silent loadview "reloads settings


    "PEP8é£æ ¼
    au BufNewFile,BufRead *.py
        \ set tabstop=4 |
        \ set softtabstop=4 |
        \ set shiftwidth=4 |
        \ set textwidth=79 |
        \ set expandtab |
        \ set autoindent |
        \ set fileformat=unix


    au BufNewFile,BufRead  *.html, *.css
        \ set tabstop=2
        \ set softtabstop=2
        \ set shiftwidth=2



    highlight BadWhitespace ctermbg=red guibg=darkred
    au BufRead,BufNewFile *.py,*.pyw,*.c,*.h match BadWhitespace /\s\+$/

    set encoding=utf-8

    "au BufReadPost * if line("'"") > 0|if line("'"") <= line("$")|exe("norm '"")|else|exe "norm $"|endif|endif



"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""}}}}



"keymap{{{{

    "åˆ‡æ¢Bufferçª—å£
    imap <S-Left> <ESC>:bp<cr> i
    imap <S-Right> <ESC>:bn<cr> i
    map <S-Left> :bp<cr>
    map <S-Right> :bn<cr>

    "çª—å£é—´ç§»åŠ¨
    map <S-Up> <C-w>h "å‘å·¦
    map <S-Down> <C-w>l "å‘å³
    map <S-k> <C-w>k "å‘ä¸Š
    map <S-j> <C-w>j "å‘ä¸‹

    "å¿«æ·é”®æ‰“å¼€Vimå†…ç½®ç»ˆç«¯
    map <F6> :terminal<cr>

    map <F7> :Dox<cr>


""""""""""'""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""'" }}}}



" Functions {{{{

    " æ–°å»º.c,.h,.sh,.javaæ–‡ä»¶ï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´ {{{

    autocmd BufNewFile *.cpp,*.[ch],*.sh,*.rb,*.java,*.py exec ":call SetTitle()"
    "é€€å‡ºæ›´æ–°ç¼–è¾‘æ—¶é—´
    autocmd FileWritePre,BufWritePre *.cpp,*.[ch],*.sh,*.rb,*.java,*.py,*.cpp ks|call DataInsert() |'s

    ""å®šä¹‰å‡½æ•°SetTitleï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´
    func SetTitle()
        "å¦‚æœæ–‡ä»¶ç±»å‹ä¸º.shæ–‡ä»¶
        if &filetype == 'sh'
            call setline(line("."),"\#!/bin/bash")
            call append(line(".")+1,"")
            call append(line(".")+2, '# ***********************************************')
            call append(line(".")+3, '#')
            call append(line(".")+4, '#      Filename: '.expand("%"))
            call append(line(".")+5, '#')
            call append(line(".")+6, '#        Author: ly - liyang.ok@outlook.com')
            call append(line(".")+7, '#        Create: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+8, '# Last Modified: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+9, '#   Description: ---')
            call append(line(".")+10, '#)
            call append(line(".")+11, '# ***********************************************')
            call append(line(".")+12,'')
        elseif &filetype == 'python'
            call append(line("."),"#!/usr/bin/env python")
            call append(line(".")+1,"# coding=utf-8")
            call append(line(".")+2, '# ****************************************************')
            call append(line(".")+3, '#')
            call append(line(".")+4, '#      Filename: '.expand("%"))
            call append(line(".")+5, '#')
            call append(line(".")+6, '#        Author: ly - liyang.ok@outlook.com')
            call append(line(".")+7, '#        Create: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+8, '# Last Modified: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+9, '#   Description: ---')
            call append(line(".")+10, '#')
            call append(line(".")+11, '# ***************************************************')
            call append(line(".")+12,'')
            call append(line(".")+13,"import os")
            call append(line(".")+14,"os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'")
            call append(line(".")+15,"import sys")
            call append(line(".")+16, "")
            "exec ':16<CR>'

        elseif &filetype == 'ruby'
	    call append(line("."),"#!/usr/bin/env ruby")
            call append(line(".")+1,"# encoding: utf-8")
            call append(line(".")+2, '# ****************************************************')
            call append(line(".")+3, '#')
            call append(line(".")+4, '#      Filename: '.expand("%"))
            call append(line(".")+5, '#')
            call append(line(".")+6, '#        Author: ly - liyang.ok@outlook.com')
            call append(line(".")+7, '#        Create: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+8, '# Last Modified: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+9, '#   Description: ---')
            call append(line(".")+10, '#')
            call append(line(".")+11, '# ***************************************************')
            call append(line(".")+12,'')

        elseif &filetype == 'jsp'
            call setline(1,"<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>")
            call append(line(".","<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">"))
            call append(line(".")+1,""))
        else
            call append(line("."),"")
            call append(line(".")+1, '/*************************************************')
            call append(line(".")+2, '*')
            call append(line(".")+3, '*')
            call append(line(".")+4, '*      Filename: '.expand("%"))
            call append(line(".")+5, '*')
            call append(line(".")+6, '*        Author: ly - liyang.ok@outlook.com')
            call append(line(".")+7, '*        Create: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+8, '* Last Modified: '.strftime("%Y-%m-%d %H:%M:%S"))
            call append(line(".")+9, '*   Description: ---')
            call append(line(".")+10, '*')
            call append(line(".")+11, '************************************************/')
            call append(line(".")+12,'')
        endif


        if expand("%:e") == 'cpp'
            call append(line(".")+13, "#include<iostream>")
            call append(line(".")+14, "using namespace std;")
            call append(line(".")+15, "")
        endif


        if &filetype == 'c'
            call append(line(".")+13, "#include<stdio.h>")
            call append(line(".")+14, "")
        endif


        if expand("%:e") == 'h'
            call append(line(".")+13, "#ifndef _".toupper(expand("%:r"))."_H")
            call append(line(".")+14, "#define _".toupper(expand("%:r"))."_H")
            call append(line(".")+15, "#endif")
        endif


        if &filetype == 'java'
            call append(line(".")+13,"public class ".expand("%:r")."{")
            call append(line(".")+14,"")

            call append(line(".")+15,"}")
        endif

        "æ–°å»ºæ–‡ä»¶åï¼Œè‡ªåŠ¨å®šä½åˆ°æ–‡ä»¶æœ«å°¾
    endfunc


    ""SET Last Modified Time START
    func DataInsert()
        call cursor(9,1)
        if search ('Last Modified') != 0
            let line = line('.')
            call setline(line, '# Last Modified: '.strftime("%Y-%m-%d %H:%M:%S"))
        endif
    endfunc
    
    "SET Last Modified Time END

    "}}}




    "å®šä¹‰FormartSrc(),ä»£ç æ ¼å¼ ä¼˜åŒ– {{{

    map <leader>f :call FormartSrc()<CR><CR>

    func FormartSrc()
        exec "w"
        if &filetype == 'c'
            exec "!astyle --style=ansi --suffix=none % & rm %.orig"
        elseif &filetype == 'cpp' || &filetype == 'hpp'
            exec "r !astyle --style=ansi --suffix=none % & rm %.orig"
        elseif &filetype == 'perl'
            exec "!astyle --style=gnu --suffix=none % & rm %.orig"
        elseif &filetype == 'py'||&filetype == 'python'
            exec "!autopep8 --in-place --aggressive  %"
        elseif &filetype == 'java'
            exec "!astyle --style=java --suffix=none % & rm %.orig"
        elseif &filetype == 'jsp'
            exec "!astyle --style=gnu --suffix=none % & rm %.orig"
        elseif &filetype == 'xml'
            exec "!astyle --style=gnu --suffix=none % & rm %.orig"
        else
            exec "normal gg=G"
            return
        endif
        exec "e! %"
    endfunc

    "}}}


    "æŒ‰F5 ç¼–è¯‘è¿è¡Œ,F8è°ƒè¯• {{{

    map <F5> :call CompileRunGcc()<CR>

    map <F8> :call Rungdb()<CR>

    func! CompileRunGcc()
        exec "w"
        if &filetype == 'c'
            exec "!g++ % -o %<"
            exec "!time ./%<"
        elseif &filetype == 'cpp'
            exec "!g++ % -std=c++11 -o %<"
            exec "!time ./%<"
        elseif &filetype == 'java'
            exec "!javac %"
            exec "!time java %<"
        elseif &filetype == 'sh'
            :!time bash %
        elseif &filetype == 'python'
            exec "source ~/venv/bin/activate"
            exec "!time python3 %"
        elseif &filetype == 'html'
            exec "!google-chrome % &"
        elseif &filetype == 'go'
            exec "!go build %<"
            exec "!time go run %"
        elseif &filetype == 'mkd'
            exec "!~/.vim/markdown.pl % > %.html &"
            exec "!firefox %.html &"
        endif
    endfunc

    func! Rungdb()
        exec "w"
        exec "!g++ % -std=c++11 -g -o %<"
        exec "!gdb ./%<"
    endfunc
    "}}}


    " åœ¨æµè§ˆå™¨é¢„è§ˆ for Mac{{{
    function! ViewInBrowser(name)
        let file = expand("%:p")
        let l:browsers = {
            \"cr":"open -a \"Google Chrome\"",
            \"sf":"open -a Safari",
        \}

        let file = '"'. file . '"'
        exec ":update " .file
        exec ":silent!" .l:browsers[a:name] ." file://". file
    endfunction
    nmap <Leader>cr :call ViewInBrowser("cr")<cr>
    nmap <Leader>sf :call ViewInBrowser("sf")<cr>:e<cr>
    "}}}

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""}}}}



"è®©é…ç½®å˜æ›´ç«‹å³ç”Ÿæ•ˆ

autocmd BufWritePost $MYVIMRC source $MYVIMRC
